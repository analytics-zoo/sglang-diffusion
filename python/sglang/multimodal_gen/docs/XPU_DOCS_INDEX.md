# SGLang Diffusion Intel XPU æ–‡æ¡£ç´¢å¼•

æ¬¢è¿ä½¿ç”¨SGLang Diffusion Intel XPUæ–‡æ¡£ï¼æœ¬ç´¢å¼•å¸®åŠ©æ‚¨å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„ä¿¡æ¯ã€‚

---

## ğŸ“š æ–‡æ¡£åˆ—è¡¨

### 1. [Intel XPU å®Œæ•´éƒ¨ç½²æŒ‡å—](./INTEL_XPU_GUIDE.md)

**é€‚åˆäººç¾¤**: ç³»ç»Ÿç®¡ç†å‘˜ã€DevOpså·¥ç¨‹å¸ˆã€åˆæ¬¡éƒ¨ç½²ç”¨æˆ·

**å†…å®¹æ¦‚è§ˆ**:
- âœ… ç³»ç»Ÿè¦æ±‚å’Œç¡¬ä»¶é…ç½®
- âœ… å®Œæ•´å®‰è£…æ­¥éª¤ï¼ˆé©±åŠ¨ã€PyTorchã€IPEXã€oneCCLã€SGLangï¼‰
- âœ… å•å¡å’Œå¤šå¡å¯åŠ¨æ–¹å¼
- âœ… æ•°æ®å¹¶è¡Œï¼ˆDPï¼‰ã€åºåˆ—å¹¶è¡Œï¼ˆSPï¼‰ã€æ··åˆå¹¶è¡Œé…ç½®
- âœ… æ€§èƒ½è°ƒä¼˜æŠ€å·§
- âœ… å¸¸è§é—®é¢˜æ•…éšœæ’æŸ¥

**å¿«é€Ÿè·³è½¬**:
- [å®‰è£…æ­¥éª¤](./INTEL_XPU_GUIDE.md#2-å®‰è£…æ­¥éª¤)
- [å•å¡å¯åŠ¨](./INTEL_XPU_GUIDE.md#31-å•å¡å¯åŠ¨)
- [å¤šå¡å¯åŠ¨](./INTEL_XPU_GUIDE.md#32-å¤šå¡å¯åŠ¨)
- [æ€§èƒ½è°ƒä¼˜](./INTEL_XPU_GUIDE.md#6-æ€§èƒ½è°ƒä¼˜)
- [æ•…éšœæ’æŸ¥](./INTEL_XPU_GUIDE.md#7-æ•…éšœæ’æŸ¥)

---

### 2. [Serving Pipeline æŠ€æœ¯è¯¦è§£](./SERVING_PIPELINE_INTERNALS.md)

**é€‚åˆäººç¾¤**: å¼€å‘è€…ã€æ¶æ„å¸ˆã€éœ€è¦æ·±å…¥ç†è§£ç³»ç»Ÿå†…éƒ¨æœºåˆ¶çš„ç”¨æˆ·

**å†…å®¹æ¦‚è§ˆ**:
- âœ… æ¶æ„ç»„ä»¶è¯¦è§£ï¼ˆFastAPIã€Schedulerã€Workerã€Pipelineï¼‰
- âœ… è¯·æ±‚å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ˆä»HTTPåˆ°è¾“å‡ºï¼‰
- âœ… Pipeline Stageé€ä¸ªåˆ†æ
- âœ… å¤šå¡åˆ†å¸ƒå¼æ‰§è¡Œç»†èŠ‚
- âœ… é€šä¿¡æœºåˆ¶ï¼ˆZMQã€Pipeã€XCCLï¼‰
- âœ… å†…å­˜ç®¡ç†å’Œæ•°æ®æµ

**å¿«é€Ÿè·³è½¬**:
- [æ¶æ„æ¦‚è§ˆ](./SERVING_PIPELINE_INTERNALS.md#1-æ¶æ„æ¦‚è§ˆ)
- [ç»„ä»¶è¯¦ç»†è¯´æ˜](./SERVING_PIPELINE_INTERNALS.md#2-ç»„ä»¶è¯¦ç»†è¯´æ˜)
- [è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ](./SERVING_PIPELINE_INTERNALS.md#3-è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ)
- [Pipeline Stageè¯¦è§£](./SERVING_PIPELINE_INTERNALS.md#4-pipeline-stageè¯¦è§£)
- [å¤šå¡åˆ†å¸ƒå¼æ‰§è¡Œ](./SERVING_PIPELINE_INTERNALS.md#5-å¤šå¡åˆ†å¸ƒå¼æ‰§è¡Œ)

---

### 3. [XPU åˆ†å¸ƒå¼é€šä¿¡æ”¯æŒ](./XPU_DISTRIBUTED.md)

**é€‚åˆäººç¾¤**: éœ€è¦é…ç½®åˆ†å¸ƒå¼è®­ç»ƒ/æ¨ç†çš„ç”¨æˆ·

**å†…å®¹æ¦‚è§ˆ**:
- âœ… oneCCLï¼ˆXCCL backendï¼‰å®‰è£…å’Œé…ç½®
- âœ… åˆ†å¸ƒå¼ç¯å¢ƒå˜é‡è®¾ç½®
- âœ… é›†åˆé€šä¿¡æ“ä½œç¤ºä¾‹
- âœ… æ€§èƒ½ä¼˜åŒ–å‚æ•°

**å¿«é€Ÿè·³è½¬**:
- [ç¯å¢ƒå˜é‡](./XPU_DISTRIBUTED.md#ç¯å¢ƒå˜é‡)
- [æ€§èƒ½ä¼˜åŒ–](./XPU_DISTRIBUTED.md#æ€§èƒ½ä¼˜åŒ–)

---

### 4. [Backend å‘½åè§„èŒƒ](./BACKEND_NAMING.md)

**é€‚åˆäººç¾¤**: å¼€å‘è€…

**å†…å®¹æ¦‚è§ˆ**:
- âœ… "xccl" vs "CCL/oneCCL" å‘½åè¯´æ˜
- âœ… PyTorch backendæ³¨å†Œæœºåˆ¶
- âœ… æ­£ç¡®ä½¿ç”¨æ–¹å¼

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

### æ–°ç”¨æˆ·æ¨èé˜…è¯»è·¯å¾„

```
1. é˜…è¯»"å®‰è£…æ­¥éª¤"å®Œæˆç¯å¢ƒé…ç½®
   â†’ INTEL_XPU_GUIDE.md#2-å®‰è£…æ­¥éª¤

2. å°è¯•å•å¡å¯åŠ¨
   â†’ INTEL_XPU_GUIDE.md#31-å•å¡å¯åŠ¨

3. äº†è§£Pipelineå¦‚ä½•å·¥ä½œ
   â†’ SERVING_PIPELINE_INTERNALS.md#3-è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ

4. é…ç½®å¤šå¡å¹¶è¡Œï¼ˆå¦‚æœæœ‰å¤šGPUï¼‰
   â†’ INTEL_XPU_GUIDE.md#32-å¤šå¡å¯åŠ¨

5. æ€§èƒ½è°ƒä¼˜
   â†’ INTEL_XPU_GUIDE.md#6-æ€§èƒ½è°ƒä¼˜
```

### å¸¸è§ä»»åŠ¡å¿«é€Ÿç´¢å¼•

| ä»»åŠ¡ | æ–‡æ¡£ä½ç½® |
|------|---------|
| å®‰è£…Intel GPUé©±åŠ¨ | [INTEL_XPU_GUIDE.md#21-å®‰è£…intel-xpué©±åŠ¨](./INTEL_XPU_GUIDE.md#21-å®‰è£…intel-xpué©±åŠ¨) |
| å¯åŠ¨å•å¡HTTPæœåŠ¡å™¨ | [INTEL_XPU_GUIDE.md#313-å¯åŠ¨httpæœåŠ¡å™¨å•å¡](./INTEL_XPU_GUIDE.md#313-å¯åŠ¨httpæœåŠ¡å™¨å•å¡) |
| é…ç½®4å¡æ•°æ®å¹¶è¡Œ | [INTEL_XPU_GUIDE.md#322-æ•°æ®å¹¶è¡Œæ¨¡å¼dp](./INTEL_XPU_GUIDE.md#322-æ•°æ®å¹¶è¡Œæ¨¡å¼dp) |
| é…ç½®åºåˆ—å¹¶è¡Œ | [INTEL_XPU_GUIDE.md#323-åºåˆ—å¹¶è¡Œæ¨¡å¼sp](./INTEL_XPU_GUIDE.md#323-åºåˆ—å¹¶è¡Œæ¨¡å¼sp) |
| ç†è§£Pipelineæ‰§è¡Œæµç¨‹ | [SERVING_PIPELINE_INTERNALS.md#3-è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ](./SERVING_PIPELINE_INTERNALS.md#3-è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ) |
| è§£å†³"CCL not available"é”™è¯¯ | [INTEL_XPU_GUIDE.md#é—®é¢˜1-ccl-not-available](./INTEL_XPU_GUIDE.md#é—®é¢˜1-ccl-not-available) |
| è§£å†³æ˜¾å­˜ä¸è¶³é—®é¢˜ | [INTEL_XPU_GUIDE.md#é—®é¢˜4-æ˜¾å­˜ä¸è¶³oom](./INTEL_XPU_GUIDE.md#é—®é¢˜4-æ˜¾å­˜ä¸è¶³oom) |
| ä¼˜åŒ–æ¨ç†æ€§èƒ½ | [INTEL_XPU_GUIDE.md#6-æ€§èƒ½è°ƒä¼˜](./INTEL_XPU_GUIDE.md#6-æ€§èƒ½è°ƒä¼˜) |
| ç†è§£XCCLé€šä¿¡æœºåˆ¶ | [SERVING_PIPELINE_INTERNALS.md#53-é€šä¿¡æ“ä½œè¯¦è§£](./SERVING_PIPELINE_INTERNALS.md#53-é€šä¿¡æ“ä½œè¯¦è§£) |

---

## ğŸ” æŒ‰åœºæ™¯æŸ¥æ‰¾

### åœºæ™¯1: é¦–æ¬¡éƒ¨ç½²åœ¨å•å¼ Intel GPUä¸Š

**ç›®æ ‡**: å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡

**æ­¥éª¤**:
1. [å®‰è£…é©±åŠ¨å’Œä¾èµ–](./INTEL_XPU_GUIDE.md#2-å®‰è£…æ­¥éª¤)
2. [å•å¡CLIå¯åŠ¨](./INTEL_XPU_GUIDE.md#312-ä½¿ç”¨cli)
3. [éªŒè¯è¾“å‡º](./INTEL_XPU_GUIDE.md#26-éªŒè¯å®‰è£…)

**é¢„è®¡æ—¶é—´**: 30-60åˆ†é’Ÿ

---

### åœºæ™¯2: å¤šGPUæœåŠ¡å™¨é«˜ååé‡éƒ¨ç½²

**ç›®æ ‡**: æœ€å¤§åŒ–ååé‡ï¼Œå¤„ç†å¹¶å‘è¯·æ±‚

**æ¨èé…ç½®**: æ•°æ®å¹¶è¡Œï¼ˆDPï¼‰

**æ­¥éª¤**:
1. [é…ç½®ç¯å¢ƒå˜é‡](./INTEL_XPU_GUIDE.md#321-ç¯å¢ƒå˜é‡é…ç½®)
2. [å¯åŠ¨DPæ¨¡å¼æœåŠ¡å™¨](./INTEL_XPU_GUIDE.md#322-æ•°æ®å¹¶è¡Œæ¨¡å¼dp)
3. [ç†è§£DPæ‰§è¡Œæµç¨‹](./SERVING_PIPELINE_INTERNALS.md#51-æ•°æ®å¹¶è¡Œdpè¯¦ç»†æµç¨‹)
4. [è°ƒä¼˜é€šä¿¡å‚æ•°](./INTEL_XPU_GUIDE.md#63-é€šä¿¡ä¼˜åŒ–)

**é¢„è®¡æ—¶é—´**: 1-2å°æ—¶

---

### åœºæ™¯3: ç”Ÿæˆè¶…é•¿è§†é¢‘ï¼ˆ>200å¸§ï¼‰

**ç›®æ ‡**: çªç ´å•GPUå†…å­˜é™åˆ¶ï¼Œç”Ÿæˆé•¿åºåˆ—

**æ¨èé…ç½®**: åºåˆ—å¹¶è¡Œï¼ˆSPï¼‰

**æ­¥éª¤**:
1. [é…ç½®SPç¯å¢ƒ](./INTEL_XPU_GUIDE.md#321-ç¯å¢ƒå˜é‡é…ç½®)
2. [å¯åŠ¨SPæ¨¡å¼](./INTEL_XPU_GUIDE.md#323-åºåˆ—å¹¶è¡Œæ¨¡å¼sp)
3. [ç†è§£åºåˆ—åˆ†å‰²æœºåˆ¶](./SERVING_PIPELINE_INTERNALS.md#52-åºåˆ—å¹¶è¡Œspè¯¦ç»†æµç¨‹)
4. [ä¼˜åŒ–all-to-allé€šä¿¡](./INTEL_XPU_GUIDE.md#631-cclä¼˜åŒ–å‚æ•°)

**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

---

### åœºæ™¯4: å¼€å‘å’Œè°ƒè¯•

**ç›®æ ‡**: ç†è§£ç³»ç»Ÿå†…éƒ¨æœºåˆ¶ï¼Œå®šä½é—®é¢˜

**æ­¥éª¤**:
1. [é˜…è¯»æ¶æ„æ¦‚è§ˆ](./SERVING_PIPELINE_INTERNALS.md#1-æ¶æ„æ¦‚è§ˆ)
2. [è·Ÿè¸ªè¯·æ±‚æµç¨‹](./SERVING_PIPELINE_INTERNALS.md#3-è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ)
3. [ç†è§£Pipeline Stages](./SERVING_PIPELINE_INTERNALS.md#4-pipeline-stageè¯¦è§£)
4. [å¯ç”¨è°ƒè¯•æ—¥å¿—](./INTEL_XPU_GUIDE.md#72-æ—¥å¿—çº§åˆ«è°ƒæ•´)

**é¢„è®¡æ—¶é—´**: 3-4å°æ—¶

---

## ğŸ“Š æ¶æ„é€Ÿè§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·å±‚                              â”‚
â”‚  HTTP Client / Python SDK / CLI                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æœåŠ¡å±‚                                â”‚
â”‚  FastAPI Server â†’ Scheduler Client (ZMQ)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  è°ƒåº¦å±‚                                 â”‚
â”‚  Scheduler (Rank 0) â†’ Worker Distribution (Pipe)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ‰§è¡Œå±‚                                 â”‚
â”‚  GPU Workers (0-N) â†’ Pipeline Execution                 â”‚
â”‚    - Text Encoding                                      â”‚
â”‚    - Latent Preparation                                 â”‚
â”‚    - Denoising (æ ¸å¿ƒè®¡ç®—)                               â”‚
â”‚    - VAE Decoding                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 é€šä¿¡å±‚                                  â”‚
â”‚  XCCL (oneCCL) â†’ all_reduce, all_gather, all_to_all    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¯¦ç»†è¯´æ˜**: [SERVING_PIPELINE_INTERNALS.md#1-æ¶æ„æ¦‚è§ˆ](./SERVING_PIPELINE_INTERNALS.md#1-æ¶æ„æ¦‚è§ˆ)

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å†…å­˜ä¼˜åŒ–

- âœ… å¯ç”¨CPU offload: `--text-encoder-cpu-offload --vae-cpu-offload`
- âœ… å›ºå®šCPUå†…å­˜: `--pin-cpu-memory`
- âœ… ä½¿ç”¨FSDPæ¨ç†: `--use-fsdp-inference`ï¼ˆæ¨¡å‹å¤ªå¤§æ—¶ï¼‰

**è¯¦ç»†è¯´æ˜**: [INTEL_XPU_GUIDE.md#61-æ˜¾å­˜ä¼˜åŒ–](./INTEL_XPU_GUIDE.md#61-æ˜¾å­˜ä¼˜åŒ–)

### 2. æ€§èƒ½ä¼˜åŒ–

- âœ… é€‰æ‹©åˆé€‚çš„attention backend: `--attention-backend fa3`
- âœ… å¯ç”¨torch.compile: `--enable-torch-compile`
- âœ… é…ç½®CCLä¼˜åŒ–å‚æ•°: `export CCL_FUSION_THRESHOLD=1`

**è¯¦ç»†è¯´æ˜**: [INTEL_XPU_GUIDE.md#62-è®¡ç®—ä¼˜åŒ–](./INTEL_XPU_GUIDE.md#62-è®¡ç®—ä¼˜åŒ–)

### 3. å¹¶è¡Œç­–ç•¥é€‰æ‹©

| åœºæ™¯ | æ¨èå¹¶è¡Œæ–¹å¼ | ä¼˜åŠ¿ |
|------|------------|------|
| é«˜ååé‡ï¼ˆå¹¶å‘è¯·æ±‚å¤šï¼‰ | æ•°æ®å¹¶è¡Œï¼ˆDPï¼‰ | æ— é€šä¿¡å¼€é”€ï¼Œçº¿æ€§æ‰©å±• |
| é•¿åºåˆ—ï¼ˆè§†é¢‘>100å¸§ï¼‰ | åºåˆ—å¹¶è¡Œï¼ˆSPï¼‰ | çªç ´å•GPUå†…å­˜é™åˆ¶ |
| å¤§æ¨¡å‹ï¼ˆ>20Bå‚æ•°ï¼‰ | å¼ é‡å¹¶è¡Œï¼ˆTPï¼‰ | åˆ†ç‰‡æ¨¡å‹æƒé‡ |
| æ··åˆåœºæ™¯ | DP + SP | å¹³è¡¡ååé‡å’Œåºåˆ—é•¿åº¦ |

**è¯¦ç»†è¯´æ˜**: [INTEL_XPU_GUIDE.md#32-å¤šå¡å¯åŠ¨](./INTEL_XPU_GUIDE.md#32-å¤šå¡å¯åŠ¨)

*å®é™…æ€§èƒ½éœ€åœ¨æ‚¨çš„ç¯å¢ƒä¸­è¿›è¡ŒåŸºå‡†æµ‹è¯•è·å¾—*

---

## ğŸ› ï¸ å¼€å‘è€…èµ„æº

### å…³é”®ä»£ç ä½ç½®

| ç»„ä»¶ | æ–‡ä»¶è·¯å¾„ |
|------|---------|
| XPUå¹³å°å®ç° | `runtime/platforms/xpu.py` |
| XPU Communicator | `runtime/distributed/device_communicators/xpu_communicator.py` |
| FastAPIæœåŠ¡å™¨ | `runtime/entrypoints/http_server.py` |
| Scheduler | `runtime/managers/scheduler.py` |
| GPU Worker | `runtime/managers/gpu_worker.py` |
| Pipeline Stages | `runtime/pipelines/stages/` |
| åˆ†å¸ƒå¼åˆå§‹åŒ– | `runtime/distributed/parallel_state.py` |

### æµ‹è¯•

```bash
# è¿è¡ŒXPUåˆ†å¸ƒå¼æµ‹è¯•
cd /home/intel/xiangyu/study/sglang/python/sglang/multimodal_gen
python test/test_xpu_distributed.py --backend xccl --num-gpus 4

# å•å…ƒæµ‹è¯•
pytest test/ -v --xpu
```

---

## ğŸ“ è·å–å¸®åŠ©

### é—®é¢˜è¯Šæ–­æµç¨‹

```
1. æ£€æŸ¥æ—¥å¿—
   â†’ å¯ç”¨è¯¦ç»†æ—¥å¿—: --log-level debug
   â†’ æŸ¥çœ‹CCLæ—¥å¿—: export CCL_LOG_LEVEL=debug

2. éªŒè¯ç¯å¢ƒ
   â†’ æ£€æŸ¥XPUè®¾å¤‡: python -c "import torch; print(torch.xpu.device_count())"
   â†’ æ£€æŸ¥XCCL: python -c "import torch.distributed as dist; print('xccl' in dir(dist.Backend))"

3. æŸ¥é˜…æ•…éšœæ’æŸ¥æ–‡æ¡£
   â†’ INTEL_XPU_GUIDE.md#7-æ•…éšœæ’æŸ¥

4. å¦‚æœé—®é¢˜æœªè§£å†³
   â†’ æäº¤Issue: https://github.com/sgl-project/sglang/issues
   â†’ é™„å¸¦å®Œæ•´é”™è¯¯æ—¥å¿—å’Œç¯å¢ƒä¿¡æ¯
```

### ç¤¾åŒºèµ„æº

- **GitHubä»“åº“**: https://github.com/sgl-project/sglang
- **é—®é¢˜è¿½è¸ª**: https://github.com/sgl-project/sglang/issues
- **Intel IPEXæ–‡æ¡£**: https://intel.github.io/intel-extension-for-pytorch/
- **oneCCLæ–‡æ¡£**: https://oneapi-src.github.io/oneCCL/

---

## ğŸ“ æ–‡æ¡£è´¡çŒ®

æ¬¢è¿è´¡çŒ®æ–‡æ¡£æ”¹è¿›ï¼

```bash
# æ–‡æ¡£ä½ç½®
cd /home/intel/xiangyu/study/sglang/python/sglang/multimodal_gen/docs

# ç¼–è¾‘æ–‡æ¡£
vim INTEL_XPU_GUIDE.md

# æäº¤PR
git add docs/
git commit -m "docs: improve XPU deployment guide"
git push origin feature/improve-docs
```

---

## ğŸ”„ æ–‡æ¡£æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| v1.0 | 2024-11 | åˆå§‹ç‰ˆæœ¬ï¼šå®Œæ•´çš„XPUéƒ¨ç½²æŒ‡å—å’ŒPipelineè¯¦è§£ |

---

**ç»´æŠ¤è€…**: SGLang Diffusion Team  
**æœ€åæ›´æ–°**: 2024-11-11
